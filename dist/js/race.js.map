{"version":3,"sources":["../../js/race.js"],"names":["canvas","document","querySelector","context","getContext","BgTrack","ctx","count","FPS","timeout","i","img","Image","clearRect","width","height","onload","drawImage","src","clearTimeout","setTimeout","move","bind","bgTrack","Horse"],"mappings":";;;;;;AAAA,IAAIA,SAASC,SAASC,aAAT,CAAuB,SAAvB,CAAb;AACA,IAAIC,UAAUH,OAAOI,UAAP,CAAkB,IAAlB,CAAd;;IAEMC,O;AAAS;AACX,qBAAYC,GAAZ,EAAgBC,KAAhB,EAAsBC,GAAtB,EAA0B;AAAA;;AACtB,aAAKF,GAAL,GAAWA,GAAX,CADsB,CACP;AACf,aAAKC,KAAL,GAAaA,KAAb,CAFsB,CAEH;AACnB,aAAKC,GAAL,GAAWA,GAAX,CAHsB,CAGP;AACf,aAAKC,OAAL,GAAe,IAAf,CAJsB,CAIF;AACpB,aAAKC,CAAL,GAAS,CAAT,CALsB,CAKX;AACd;;;;+BACK;AAAA;;AACF,gBAAIC,MAAM,IAAIC,KAAJ,EAAV;AACA,iBAAKN,GAAL,CAASO,SAAT,CAAmB,CAAnB,EAAqB,CAArB,EAAuBF,IAAIG,KAA3B,EAAiCH,IAAII,MAArC,EAFE,CAE2C;AAC7CJ,gBAAIG,KAAJ,GAAYd,OAAOc,KAAnB;AACAH,gBAAII,MAAJ,GAAaf,OAAOe,MAApB;AACAJ,gBAAIK,MAAJ,GAAa;AAAA,uBAAM,MAAKV,GAAL,CAASW,SAAT,CAAmBN,GAAnB,EAAuB,CAAvB,EAAyB,CAAzB,EAA2BA,IAAIG,KAA/B,EAAqCH,IAAII,MAAzC,CAAN;AAAA,aAAb,CALE,CAKkE;AACpEJ,gBAAIO,GAAJ,mCAAwC,KAAKR,CAA7C;AACA,iBAAKA,CAAL;AACA,gBAAG,KAAKA,CAAL,GAAO,KAAKH,KAAf,EAAqB;AAAC;AAClBY,6BAAa,KAAKV,OAAlB;AACA;AACH;AACD,iBAAKA,OAAL,GAAeW,WAAW,KAAKC,IAAL,CAAUC,IAAV,CAAe,IAAf,CAAX,EAAgC,KAAKd,GAArC,CAAf,CAZE,CAYuD;AAC5D;;;;;;AAGL,IAAIe,UAAU,IAAIlB,OAAJ,CAAYF,OAAZ,EAAoB,GAApB,EAAwB,GAAxB,CAAd;AACA;;IAEMqB,K;AAAO;AACT,qBAAa;AAAA;AAEZ;;;;8BACI,CAEJ;;;kCACQ,CAER","file":"race.js","sourcesContent":["let canvas = document.querySelector('#canvas');\r\nlet context = canvas.getContext('2d');\r\n\r\nclass BgTrack {//背景类\r\n    constructor(ctx,count,FPS){\r\n        this.ctx = ctx;//画笔\r\n        this.count = count;//背景图片张数\r\n        this.FPS = FPS;//更新频率\r\n        this.timeout = null;//定时器\r\n        this.i = 0;//累加，每个序号对应不同图片\r\n    }\r\n    move(){\r\n        let img = new Image();\r\n        this.ctx.clearRect(0,0,img.width,img.height);//清除上一张图片释放内存\r\n        img.width = canvas.width;\r\n        img.height = canvas.height;\r\n        img.onload = () => this.ctx.drawImage(img,0,0,img.width,img.height);//画入背景图片\r\n        img.src = `./images/bg_track/bg_track_${this.i}.jpg`;\r\n        this.i++;\r\n        if(this.i>this.count){//图片个数超过背景图总数后停止画入图片\r\n            clearTimeout(this.timeout);\r\n            return;\r\n        }\r\n        this.timeout = setTimeout(this.move.bind(this),this.FPS);//不断画入图片\r\n    }\r\n}\r\n\r\nlet bgTrack = new BgTrack(context,396,100);\r\n// bgTrack.move();\r\n\r\nclass Horse {//马类\r\n    constructor(){\r\n\r\n    }\r\n    run(){\r\n\r\n    }\r\n    forward(){\r\n        \r\n    }\r\n}"]}